<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Rock Paper Scissors</title>
  <link rel="stylesheet" href="../../styles.css" />
  <style>
    body{display:flex;justify-content:center;align-items:center;height:100vh;}
    #rpsMenu{display:flex;flex-direction:column;gap:1.5rem;align-items:center;}
    #rpsMenu button{
      font-family:"Press Start 2P", monospace;
      background:var(--bg);color:var(--accent);
      border:3px solid var(--fg);padding:0.75rem 1rem;cursor:pointer;
    }
    #rpsMenu button:hover,#rpsMenu button:focus{border-color:var(--accent);}
    #game.hidden, #rpsMenu.hidden{display:none !important;}
    #choices{display:flex;gap:1.5rem;justify-content:center;margin:1.5rem 0;}
    .choice{
      width:120px;height:120px;border:4px solid var(--fg);cursor:pointer;
      display:flex;align-items:center;justify-content:center;
      font:48px "Press Start 2P", monospace;color:var(--accent);
    }
    .disabled{pointer-events:none;color:var(--fg);}
    #status{text-align:center;font-size:0.8rem;}
  </style>
</head>
<body>
  <div id="rpsMenu">
    <h1>✊ ✋ ✌️</h1>
    <!-- Much better with friends. Hide your mouse pointer after selecting!!! -->
    <button data-mode="1">1 Player</button>
    <button data-mode="2">2 Player</button>
    <p style="font-size:0.7rem;">(ESC returns)</p>
  </div>

  <div id="game" class="hidden">
    <div id="status">Make your choice</div>
    <div id="choices"></div>
  </div>

  <script>
    const menu      = document.getElementById('rpsMenu');
    const gameWrap  = document.getElementById('game');
    const choicesEl = document.getElementById('choices');
    const statusEl  = document.getElementById('status');

    const symbols = { rock:'✊', paper:'✋', scissors:'✌️' };
    const keys    = Object.keys(symbols);
    let mode,inGame=false,step,choices=[null,null];

    keys.forEach(k=>{
      const btn=document.createElement('div');
      btn.className='choice';
      btn.dataset.choice=k;
      btn.textContent=symbols[k];
      btn.addEventListener('click',()=>select(k));
      choicesEl.appendChild(btn);
    });

    menu.addEventListener('click',e=>{
      if(e.target.tagName!=='BUTTON')return;
      startGame(Number(e.target.dataset.mode));
    });

    function startGame(selected){
      mode=selected;
      step=0;choices=[null,null];
      menu.classList.add('hidden');
      gameWrap.classList.remove('hidden');
      inGame=true;
      status('Player 1: choose');
      enableChoices(true);
    }

    function select(choice){
      if(step===0){                    
        choices[0]=choice;
        if(mode===2){ step=1; status('Player 2: choose'); enableChoices(true,true); }
        else { botMove(); showResult(); }
      }else if(step===1){                  
        choices[1]=choice;
        showResult();
      }
    }

    function botMove(){
      choices[1]= keys[Math.floor(Math.random()*3)];
    }

    function showResult(){
      enableChoices(false);
      const [p1,p2]=choices;
      const result =
        p1===p2 ? 'Draw!' :
        (p1==='rock'     && p2==='scissors')||
        (p1==='paper'    && p2==='rock')    ||
        (p1==='scissors' && p2==='paper')  ? 'Player 1 wins!' :
                                             (mode===2?'Player 2 wins!':'Bot wins!');
      status(`${symbols[p1]} vs ${symbols[p2]} → ${result}`);
      setTimeout(()=>startGame(mode),1500);
    }

    function status(msg){statusEl.textContent=msg;}
    function enableChoices(on,reset=false){
      document.querySelectorAll('.choice').forEach(btn=>{
        if(reset)btn.classList.remove('disabled');
        btn.classList.toggle('disabled',!on);
      });
    }

    document.addEventListener('keydown',e=>{
      if(e.key!=='Escape')return;
      if(inGame){
        gameWrap.classList.add('hidden');menu.classList.remove('hidden');
        inGame=false;
      }else window.location.href='../../index.html';
    });
  </script>
</body>
</html>